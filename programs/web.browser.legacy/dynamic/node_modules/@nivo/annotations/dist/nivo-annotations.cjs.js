function module(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(e,"__esModule",{value:!0});var o=t("react"),i=n(o),r=n(t("prop-types")),a=t("react-motion"),u=t("@nivo/core"),l=n(t("lodash/isPlainObject")),s=n(t("lodash/filter")),c=n(t("lodash/omit")),f=r.shape({match:r.oneOfType([r.func,r.object]).isRequired,type:r.oneOf(["circle","rect","dot"]).isRequired,noteX:r.oneOfType([r.number,r.shape({abs:r.number.isRequired})]).isRequired,noteY:r.oneOfType([r.number,r.shape({abs:r.number.isRequired})]).isRequired,noteWidth:r.number,noteTextOffset:r.number,note:r.oneOfType([r.node,r.func]).isRequired,offset:r.number}),d={noteWidth:120,noteTextOffset:8,animate:!0,motionStiffness:90,motionDamping:13};function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(Object(n));"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){h(t,e,n[e])}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function t(e){return{x:e.x,y:e.y}},p=function t(e){var n=e.items,o=e.annotations,i=e.getPosition,r=void 0===i?m:i,a=e.getDimensions;return o.reduce((function(t,e){return s(n,e.match).forEach((function(n){var o=r(n),i=a(n,e.offset||0);t.push(y({},c(e,["match","offset"]),o,i,{datum:n,size:e.size||i.size}))})),t}),[])},b=function t(e,n,o,i){var r=Math.atan2(i-n,o-e);return u.absoluteAngleDegrees(u.radiansToDegrees(r))},g=function t(e){var n=e.type,o=e.x,i=e.y,r=e.size,a=e.width,s=e.height,c=e.noteX,f=e.noteY,y=e.noteWidth,h=void 0===y?d.noteWidth:y,m=e.noteTextOffset,p=void 0===m?d.noteTextOffset:m,g,O;l(c)?void 0!==c.abs&&(g=c.abs):g=o+c,l(f)?void 0!==f.abs&&(O=f.abs):O=i+f;var x=o,W=i,k=b(o,i,g,O);if("circle"===n){var v=u.positionFromAngle(u.degreesToRadians(k),r/2);x+=v.x,W+=v.y}if("rect"===n){var j=Math.round((k+90)/45)%8;0===j&&(W-=s/2),1===j&&(x+=a/2,W-=s/2),2===j&&(x+=a/2),3===j&&(x+=a/2,W+=s/2),4===j&&(W+=s/2),5===j&&(x-=a/2,W+=s/2),6===j&&(x-=a/2),7===j&&(x-=a/2,W-=s/2)}var w=g,P,E=g,T;return(k+90)%360>180?(w-=h,E-=h):E+=h,{points:[[x,W],[g,O],[E,O]],text:[w,O-p],angle:k+90}};function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(Object(n));"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){x(t,e,n[e])}))}return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var W=function t(e){var n=e.items,i=e.annotations,r=e.getPosition,a=e.getDimensions;return o.useMemo((function(){return p({items:n,annotations:i,getPosition:r,getDimensions:a})}),[n,i,r,a])},k=function t(e){var n=e.annotations,i=e.containerWidth,r=e.containerHeight;return o.useMemo((function(){return n.map((function(t){return O({},t,{computed:g(O({containerWidth:i,containerHeight:r},t))})}))}),[n,i,r])},v=function t(e){var n=e.type,i=e.containerWidth,r=e.containerHeight,a=e.x,u=e.y,l=e.size,s=e.width,c=e.height,f=e.noteX,d=e.noteY,y=e.noteWidth,h=e.noteTextOffset;return o.useMemo((function(){return g({type:n,containerWidth:i,containerHeight:r,x:a,y:u,size:l,width:s,height:c,noteX:f,noteY:d,noteWidth:y,noteTextOffset:h})}),[n,i,r,a,u,l,s,c,f,d,y,h])};function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(Object(n));"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){w(t,e,n[e])}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var P=o.memo((function(t){var e=t.datum,n=t.x,o=t.y,r=t.note,a=u.useTheme();return"function"==typeof r?r({x:n,y:o,datum:e}):i.createElement(i.Fragment,null,a.annotations.text.outlineWidth>0&&i.createElement("text",{x:n,y:o,style:j({},a.annotations.text,{strokeLinejoin:"round",strokeWidth:2*a.annotations.text.outlineWidth,stroke:a.annotations.text.outlineColor})},r),i.createElement("text",{x:n,y:o,style:c(a.annotations.text,["outlineWidth","outlineColor"])},r))}));function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(Object(n));"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){T(t,e,n[e])}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}P.displayName="AnnotationNote",P.propTypes={datum:r.object.isRequired,x:r.number.isRequired,y:r.number.isRequired,note:r.oneOfType([r.node,r.func]).isRequired},P.defaultProps={};var q=o.memo((function(t){var e=t.points,n=t.isOutline,o=u.useTheme(),r=u.useMotionConfig(),a=r.animate,l=r.springConfig;if(n&&o.annotations.link.outlineWidth<=0)return null;var s=E({},o.annotations.link);n&&(s.strokeLinecap="square",s.strokeWidth=o.annotations.link.strokeWidth+2*o.annotations.link.outlineWidth,s.stroke=o.annotations.link.outlineColor);var c="M".concat(e[0][0],",").concat(e[0][1]);return e.slice(1).forEach((function(t){c="".concat(c," L").concat(t[0],",").concat(t[1])})),a?i.createElement(u.SmartMotion,{style:function t(e){return{d:e(c,l)}}},(function(t){return i.createElement("path",{fill:"none",d:t.d,style:s})})):i.createElement("path",{fill:"none",d:c,style:s})}));function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(Object(n));"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){S(t,e,n[e])}))}return t}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}q.displayName="AnnotationLink",q.propTypes={points:r.arrayOf(r.array).isRequired,isOutline:r.bool.isRequired},q.defaultProps={isOutline:!1};var C=o.memo((function(t){var e=t.x,n=t.y,o=t.size,r=u.useTheme(),l=u.useMotionConfig(),s=l.animate,c=l.springConfig;return s?i.createElement(a.Motion,{style:{x:a.spring(e,c),y:a.spring(n,c),size:a.spring(o,c)}},(function(t){return i.createElement(i.Fragment,null,r.annotations.outline.outlineWidth>0&&i.createElement("circle",{cx:t.x,cy:t.y,r:t.size/2,style:R({},r.annotations.outline,{fill:"none",strokeWidth:r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,stroke:r.annotations.outline.outlineColor})}),i.createElement("circle",{cx:t.x,cy:t.y,r:t.size/2,style:r.annotations.outline}))})):i.createElement(i.Fragment,null,r.annotations.outline.outlineWidth>0&&i.createElement("circle",{cx:e,cy:n,r:o/2,style:R({},r.annotations.outline,{fill:"none",strokeWidth:r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,stroke:r.annotations.outline.outlineColor})}),i.createElement("circle",{cx:e,cy:n,r:o/2,style:r.annotations.outline}))}));function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(Object(n));"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){M(t,e,n[e])}))}return t}function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}C.displayName="CircleAnnotationOutline",C.propTypes={x:r.number.isRequired,y:r.number.isRequired,size:r.number.isRequired};var A=o.memo((function(t){var e=t.x,n=t.y,o=t.size,r=u.useTheme(),l=u.useMotionConfig(),s=l.animate,c=l.springConfig;return s?i.createElement(a.Motion,{style:{x:a.spring(e,c),y:a.spring(n,c),size:a.spring(o,c)}},(function(t){return i.createElement(i.Fragment,null,r.annotations.outline.outlineWidth>0&&i.createElement("circle",{cx:t.x,cy:t.y,r:t.size/2,style:z({},r.annotations.outline,{fill:"none",strokeWidth:2*r.annotations.outline.outlineWidth,stroke:r.annotations.outline.outlineColor})}),i.createElement("circle",{cx:t.x,cy:t.y,r:t.size/2,style:r.annotations.symbol}))})):i.createElement(i.Fragment,null,r.annotations.outline.outlineWidth>0&&i.createElement("circle",{cx:e,cy:n,r:o/2,style:z({},r.annotations.outline,{fill:"none",strokeWidth:2*r.annotations.outline.outlineWidth,stroke:r.annotations.outline.outlineColor})}),i.createElement("circle",{cx:e,cy:n,r:o/2,style:r.annotations.symbol}))}));function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(Object(n));"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){F(t,e,n[e])}))}return t}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}A.displayName="DotAnnotationOutline",A.propTypes={x:r.number.isRequired,y:r.number.isRequired,size:r.number.isRequired},A.defaultProps={size:4};var H=o.memo((function(t){var e=t.x,n=t.y,o=t.width,r=t.height,l=u.useTheme(),s=u.useMotionConfig(),c=s.animate,f=s.springConfig;return c?i.createElement(a.Motion,{style:{x:a.spring(e-o/2,f),y:a.spring(n-r/2,f),width:a.spring(o,f),height:a.spring(r,f)}},(function(t){return i.createElement(i.Fragment,null,l.annotations.outline.outlineWidth>0&&i.createElement("rect",{x:t.x,y:t.y,width:t.width,height:t.height,style:D({},l.annotations.outline,{fill:"none",strokeWidth:l.annotations.outline.strokeWidth+2*l.annotations.outline.outlineWidth,stroke:l.annotations.outline.outlineColor})}),i.createElement("rect",{x:t.x,y:t.y,width:t.width,height:t.height,style:l.annotations.outline}))})):i.createElement(i.Fragment,null,l.annotations.outline.outlineWidth>0&&i.createElement("rect",{x:e-o/2,y:n-r/2,width:o,height:r,style:D({},l.annotations.outline,{fill:"none",strokeWidth:l.annotations.outline.strokeWidth+2*l.annotations.outline.outlineWidth,stroke:l.annotations.outline.outlineColor})}),i.createElement("rect",{x:e-o/2,y:n-r/2,width:o,height:r,style:l.annotations.outline}))}));H.displayName="RectAnnotationOutline",H.propTypes={x:r.number.isRequired,y:r.number.isRequired,width:r.number.isRequired,height:r.number.isRequired};var N=o.memo((function(t){var e=t.datum,n=t.type,o=t.containerWidth,r=t.containerHeight,l=t.x,s=t.y,c=t.size,f=t.width,d=t.height,y=t.noteX,h=t.noteY,m=t.noteWidth,p=t.noteTextOffset,b=t.note,g=u.useMotionConfig(),O=g.animate,x=g.springConfig,W=v({type:n,containerWidth:o,containerHeight:r,x:l,y:s,size:c,width:f,height:d,noteX:y,noteY:h,noteWidth:m,noteTextOffset:p});return i.createElement(i.Fragment,null,i.createElement(q,{points:W.points,isOutline:!0}),"circle"===n&&i.createElement(C,{x:l,y:s,size:c}),"dot"===n&&i.createElement(A,{x:l,y:s,size:c}),"rect"===n&&i.createElement(H,{x:l,y:s,width:f,height:d}),i.createElement(q,{points:W.points}),!O&&i.createElement(P,{x:W.text[0],y:W.text[1],note:b}),O&&i.createElement(a.Motion,{style:{x:a.spring(W.text[0],x),y:a.spring(W.text[1],x)}},(function(t){return i.createElement(P,{datum:e,x:t.x,y:t.y,note:b})})))}));function X(t,e){return L(t)||I(t,e)||Y()}function Y(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function I(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],o=!0,i=!1,r=void 0;try{for(var a=t[Symbol.iterator](),u;!(o=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);o=!0);}catch(l){i=!0,r=l}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return n}}function L(t){if(Array.isArray(t))return t}N.displayName="Annotation",N.propTypes={datum:r.object.isRequired,type:r.oneOf(["circle","rect","dot"]).isRequired,containerWidth:r.number.isRequired,containerHeight:r.number.isRequired,x:r.number.isRequired,y:r.number.isRequired,size:r.number,width:r.number,height:r.number,noteX:r.oneOfType([r.number,r.shape({abs:r.number.isRequired})]).isRequired,noteY:r.oneOfType([r.number,r.shape({abs:r.number.isRequired})]).isRequired,noteWidth:r.number.isRequired,noteTextOffset:r.number.isRequired,note:r.oneOfType([r.node,r.func]).isRequired},N.defaultProps={noteWidth:d.noteWidth,noteTextOffset:d.noteTextOffset};var J=function t(e,n){n.forEach((function(t,n){var o=X(t,2),i=o[0],r=o[1];0===n?e.moveTo(i,r):e.lineTo(i,r)}))},_=function t(e,n){var o=n.annotations,i=n.theme;0!==o.length&&(e.save(),o.forEach((function(t){i.annotations.link.outlineWidth>0&&(e.lineCap="square",e.strokeStyle=i.annotations.link.outlineColor,e.lineWidth=i.annotations.link.strokeWidth+2*i.annotations.link.outlineWidth,e.beginPath(),J(e,t.computed.points),e.stroke(),e.lineCap="butt"),"circle"===t.type&&i.annotations.outline.outlineWidth>0&&(e.strokeStyle=i.annotations.outline.outlineColor,e.lineWidth=i.annotations.outline.strokeWidth+2*i.annotations.outline.outlineWidth,e.beginPath(),e.arc(t.x,t.y,t.size/2,0,2*Math.PI),e.stroke()),"dot"===t.type&&i.annotations.symbol.outlineWidth>0&&(e.strokeStyle=i.annotations.symbol.outlineColor,e.lineWidth=2*i.annotations.symbol.outlineWidth,e.beginPath(),e.arc(t.x,t.y,t.size/2,0,2*Math.PI),e.stroke()),"rect"===t.type&&i.annotations.outline.outlineWidth>0&&(e.strokeStyle=i.annotations.outline.outlineColor,e.lineWidth=i.annotations.outline.strokeWidth+2*i.annotations.outline.outlineWidth,e.beginPath(),e.rect(t.x-t.width/2,t.y-t.height/2,t.width,t.height),e.stroke()),e.strokeStyle=i.annotations.link.stroke,e.lineWidth=i.annotations.link.strokeWidth,e.beginPath(),J(e,t.computed.points),e.stroke(),"circle"===t.type&&(e.strokeStyle=i.annotations.outline.stroke,e.lineWidth=i.annotations.outline.strokeWidth,e.beginPath(),e.arc(t.x,t.y,t.size/2,0,2*Math.PI),e.stroke()),"dot"===t.type&&(e.fillStyle=i.annotations.symbol.fill,e.beginPath(),e.arc(t.x,t.y,t.size/2,0,2*Math.PI),e.fill()),"rect"===t.type&&(e.strokeStyle=i.annotations.outline.stroke,e.lineWidth=i.annotations.outline.strokeWidth,e.beginPath(),e.rect(t.x-t.width/2,t.y-t.height/2,t.width,t.height),e.stroke()),"function"==typeof t.note?t.note(e,{datum:t.datum,x:t.computed.text[0],y:t.computed.text[1],theme:i}):(e.font="".concat(i.annotations.text.fontSize,"px ").concat(i.annotations.text.fontFamily),e.fillStyle=i.annotations.text.fill,e.strokeStyle=i.annotations.text.outlineColor,e.lineWidth=2*i.annotations.text.outlineWidth,i.annotations.text.outlineWidth>0&&(e.lineJoin="round",e.strokeText(t.note,t.computed.text[0],t.computed.text[1]),e.lineJoin="miter"),e.fillText(t.note,t.computed.text[0],t.computed.text[1]))})),e.restore())};e.Annotation=N,e.annotationSpecPropType=f,e.bindAnnotations=p,e.computeAnnotation=g,e.defaultProps=d,e.getLinkAngle=b,e.renderAnnotationsToCanvas=_,e.useAnnotations=W,e.useComputedAnnotation=v,e.useComputedAnnotations=k}

