function module(e,n){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(n,"__esModule",{value:!0});var a=t(e("prop-types")),r=e("d3-scale"),o=e("d3-time-format"),i=t(e("lodash/uniq")),u=t(e("lodash/uniqBy")),c=t(e("lodash/sortBy")),l=t(e("lodash/last")),s=t(e("lodash/isDate")),f=function e(n,t,a,o){var i=n.axis,u=n.min,c=void 0===u?0:u,l=n.max,s=void 0===l?"auto":l,f=n.stacked,d=void 0!==f&&f,m=n.reverse,p=void 0!==m&&m,y=t[i],v="x"===i?a:o,h=c;"auto"===c&&(h=!0===d?y.minStacked:y.min);var x=s;"auto"===s&&(x=!0===d?y.maxStacked:y.max);var b=r.scaleLinear().rangeRound("x"===i?[0,v]:[v,0]);return!0===p?b.domain([x,h]):b.domain([h,x]),b.type="linear",b.stacked=d,b},d={type:a.oneOf(["linear"]).isRequired,min:a.oneOfType([a.oneOf(["auto"]),a.number]),max:a.oneOfType([a.oneOf(["auto"]),a.number]),stacked:a.bool,reverse:a.bool},m=function e(n,t,a,o){var i=n.axis,u=n.base,c=void 0===u?10:u,l=n.min,s=void 0===l?"auto":l,f=n.max,d=void 0===f?"auto":f,m=t[i],p="x"===i?a:o,y=m.all.some((function(e){return 0===e})),v,h=!1;if(m.all.forEach((function(e){!0!==h&&(void 0===v?v=Math.sign(e):Math.sign(e)!==v&&(h=!0))})),y||h)throw new Error(["a log scale domain must be strictly-positive or strictly-negative,","and must not include or cross zero."].join("\n"));var x=s;"auto"===s&&(x=m.min);var b=d;"auto"===d&&(b=m.max);var g=r.scaleLog().domain([x,b]).rangeRound("x"===i?[0,p]:[p,0]).base(c).nice();return g.type="log",g},p={type:a.oneOf(["log"]).isRequired,base:a.number,min:a.oneOfType([a.oneOf(["auto"]),a.number]),max:a.oneOfType([a.oneOf(["auto"]),a.number])},y=function e(n,t,a,o){var i=n.axis,u=t[i],c="x"===i?a:o,l=r.scalePoint().range([0,c]).domain(u.all);return l.type="point",l},v={type:a.oneOf(["point"]).isRequired},h;function x(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var b="millisecond",g="second",S="minute",O="hour",k="day",T="month",E="year",M=["millisecond","second","minute","hour","day","month","year"],P=[function(e){return e.setMilliseconds(0)},function(e){return e.setSeconds(0)},function(e){return e.setMinutes(0)},function(e){return e.setHours(0)},function(e){return e.setDate(1)},function(e){return e.setMonth(0)}],j=(x(h={},"millisecond",[]),x(h,"second",P.slice(0,1)),x(h,"minute",P.slice(0,2)),x(h,"hour",P.slice(0,3)),x(h,"day",P.slice(0,4)),x(h,"month",P.slice(0,5)),x(h,"year",P.slice(0,6)),h),w=function e(n){return function(e){return j[n].forEach((function(n){n(e)})),e}},A=function e(n){var t=n.format,a=void 0===t?"native":t,r=n.precision,i=void 0===r?"millisecond":r,u=n.useUTC,c=void 0===u||u,l=w(i);if("native"===a)return function(e){return l(e)};var s=c?o.utcParse(a):o.timeParse(a);return function(e){return l(s(e))}},q=function e(n,t,a,o){var i=n.axis,u=n.format,c=void 0===u?"native":u,l=n.precision,s=void 0===l?"millisecond":l,f=n.min,d=void 0===f?"auto":f,m=n.max,p=void 0===m?"auto":m,y=n.useUTC,v=void 0===y||y,h=t[i],x="x"===i?a:o,b=A({format:c,precision:s,useUTC:v}),g=d;"auto"===d?g=h.min:"native"!==c&&(g=b(h.min));var S=p;"auto"===p?S=h.max:"native"!==c&&(S=b(h.max));var O=v?r.scaleUtc():r.scaleTime();return O.domain([g,S]).range([0,x]),O.type="time",O.useUTC=v,O},R={type:a.oneOf(["time"]).isRequired,format:a.string,precision:a.oneOf(M)};function U(e){return V(e)||D(e)||C()}function C(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function D(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function V(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}function X(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(Object(t));"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){Y(e,n,t[n])}))}return e}function Y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var B=function e(n){return"x"===n?"y":"x"},F=function e(n,t){return n===t},L=function e(n,t){return n.getTime()===t.getTime()},_=function e(n,t,a,r,o){var i=n.map((function(e){return X({},e,{data:e.data.map((function(e){return{data:X({},e)}}))})})),u=H(i,t,a);!0===t.stacked&&J(a.type,u,i),!0===a.stacked&&K(t.type,u,i);var c=z(X({},t,{axis:"x"}),u,r,o),l=z(X({},a,{axis:"y"}),u,r,o);return i.forEach((function(e){e.data.forEach((function(e){e.position={x:!0===c.stacked?null===e.data.xStacked?null:c(e.data.xStacked):null===e.data.x?null:c(e.data.x),y:!0===l.stacked?null===e.data.yStacked?null:l(e.data.yStacked):null===e.data.y?null:l(e.data.y)}}))})),X({},u,{series:i,xScale:c,yScale:l})},z=function e(n,t,a,r){return"linear"===n.type?f(n,t,a,r):"point"===n.type?y(n,t,a,r):"time"===n.type?q(n,t,a,r):"log"===n.type?m(n,t,a,r):void 0},H=function e(n,t,a){return{x:I(n,"x",t),y:I(n,"y",a)}},I=function e(n,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.getValue,s=void 0===o?function(e){return e.data[t]}:o,f=r.setValue,d=void 0===f?function(e,n){e.data[t]=n}:f;if("linear"===a.type)n.forEach((function(e){e.data.forEach((function(e){d(e,null===s(e)?null:parseFloat(s(e)))}))}));else if("time"===a.type&&"native"!==a.format){var m=A(a);n.forEach((function(e){e.data.forEach((function(e){d(e,null===s(e)?null:m(s(e)))}))}))}var p=[],y,v;return n.forEach((function(e){e.data.forEach((function(e){p.push(s(e))}))})),"linear"===a.type?(p=i(p),p=c(p,(function(e){return e})),y=Math.min.apply(Math,U(p)),v=Math.max.apply(Math,U(p))):"time"===a.type?(y=(p=(p=u(p,(function(e){return e.getTime()}))).slice(0).sort((function(e,n){return n-e})).reverse())[0],v=l(p)):(y=(p=i(p))[0],v=l(p)),{all:p,min:y,max:v}},G=function e(n,t,a,r){var o=B(n),i=[];a[o].all.forEach((function(e){var t=s(e)?L:F,a=[];r.forEach((function(r){var u=r.data.find((function(n){return t(n.data[o],e)})),c=null,s=null;if(void 0!==u){if(null!==(c=u.data[n])){var f=l(a);void 0===f?s=c:null!==f&&(s=f+c)}u.data["".concat(n,"Stacked")]=s}a.push(s),i.push(s)}))})),i=i.filter((function(e){return null!==e})),a[n].minStacked=Math.min.apply(Math,U(i)),a[n].maxStacked=Math.max.apply(Math,U(i))},J=function e(n,t,a){return G("x",n,t,a)},K=function e(n,t,a){return G("y",n,t,a)},N=function e(n,t){var a=B(n);return t[a].all.map((function(e){var n,r=(Y(n={id:e},a,t["".concat(a,"Scale")](e)),Y(n,"data",[]),n),o=s(e)?L:F;return t.series.forEach((function(n){var t=n.data.find((function(n){return o(n.data[a],e)}));void 0!==t&&r.data.push(X({},t,{serie:n}))})),r.data.reverse(),r}))},Q=function e(n){return N("x",n)},W=function e(n){return N("y",n)},Z=a.oneOfType([a.shape(d),a.shape(v),a.shape(R),a.shape(p)]);n.compareDateValues=L,n.compareValues=F,n.computeAxisSlices=N,n.computeScale=z,n.computeXSlices=Q,n.computeXYScalesForSeries=_,n.computeYSlices=W,n.generateSeriesAxis=I,n.generateSeriesXY=H,n.getOtherAxis=B,n.linearScale=f,n.linearScalePropTypes=d,n.logScale=m,n.logScalePropTypes=p,n.pointScale=y,n.pointScalePropTypes=v,n.scalePropType=Z,n.stackAxis=G,n.stackX=J,n.stackY=K,n.timeScale=q,n.timeScalePropTypes=R}

