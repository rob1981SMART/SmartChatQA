function module(t,e,a){"use strict";e.__esModule=!0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();function l(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u,s=l(t("./mapToZero")),c,f=l(t("./stripStyle")),p,d=l(t("./stepper")),y,m=l(t("performance-now")),h,v=l(t("raf")),S,b=l(t("./shouldStopAnimation")),I,T=l(t("react")),O,w=l(t("prop-types")),P=1e3/60,g=function(t){function e(a){var r=this;i(this,e),t.call(this,a),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(t){var e=!1,a=r.state,l=a.currentStyle,i=a.currentVelocity,o=a.lastIdealStyle,u=a.lastIdealVelocity;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var c=t[s];"number"==typeof c&&(e||(e=!0,l=n({},l),i=n({},i),o=n({},o),u=n({},u)),l[s]=c,i[s]=0,o[s]=c,u[s]=0)}e&&r.setState({currentStyle:l,currentVelocity:i,lastIdealStyle:o,lastIdealVelocity:u})},this.startAnimationIfNecessary=function(){r.animationID=v.default((function(t){var e=r.props.style;if(b.default(r.state.currentStyle,e,r.state.currentVelocity))return r.wasAnimating&&r.props.onRest&&r.props.onRest(),r.animationID=null,r.wasAnimating=!1,void(r.accumulatedTime=0);r.wasAnimating=!0;var a=t||m.default(),n=a-r.prevTime;if(r.prevTime=a,r.accumulatedTime=r.accumulatedTime+n,r.accumulatedTime>10*P&&(r.accumulatedTime=0),0===r.accumulatedTime)return r.animationID=null,void r.startAnimationIfNecessary();var l=(r.accumulatedTime-Math.floor(r.accumulatedTime/P)*P)/P,i=Math.floor(r.accumulatedTime/P),o={},u={},s={},c={};for(var f in e)if(Object.prototype.hasOwnProperty.call(e,f)){var p=e[f];if("number"==typeof p)s[f]=p,c[f]=0,o[f]=p,u[f]=0;else{for(var y=r.state.lastIdealStyle[f],h=r.state.lastIdealVelocity[f],v=0;v<i;v++){var S=d.default(P/1e3,y,h,p.val,p.stiffness,p.damping,p.precision);y=S[0],h=S[1]}var I=d.default(P/1e3,y,h,p.val,p.stiffness,p.damping,p.precision),T=I[0],O=I[1];s[f]=y+(T-y)*l,c[f]=h+(O-h)*l,o[f]=y,u[f]=h}}r.animationID=null,r.accumulatedTime-=i*P,r.setState({currentStyle:s,currentVelocity:c,lastIdealStyle:o,lastIdealVelocity:u}),r.unreadPropStyle=null,r.startAnimationIfNecessary()}))},this.state=this.defaultState()}return o(e,t),r(e,null,[{key:"propTypes",value:{defaultStyle:w.default.objectOf(w.default.number),style:w.default.objectOf(w.default.oneOfType([w.default.number,w.default.object])).isRequired,children:w.default.func.isRequired,onRest:w.default.func},enumerable:!0}]),e.prototype.defaultState=function t(){var e=this.props,a=e.defaultStyle,n=e.style,r=a||f.default(n),l=s.default(r);return{currentStyle:r,currentVelocity:l,lastIdealStyle:r,lastIdealVelocity:l}},e.prototype.componentDidMount=function t(){this.prevTime=m.default(),this.startAnimationIfNecessary()},e.prototype.componentWillReceiveProps=function t(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=m.default(),this.startAnimationIfNecessary())},e.prototype.componentWillUnmount=function t(){null!=this.animationID&&(v.default.cancel(this.animationID),this.animationID=null)},e.prototype.render=function t(){var e=this.props.children(this.state.currentStyle);return e&&T.default.Children.only(e)},e}(T.default.Component);e.default=g,a.exports=e.default}

