function module(n,r,t){var e,u;e=this,u=function(n){"use strict";function r(n,r){return n.parent===r.parent?1:2}function t(n){return n.reduce(e,0)/n.length}function e(n,r){return n+r.x}function u(n){return 1+n.reduce(i,0)}function i(n,r){return Math.max(n,r.y)}function o(n){for(var r;r=n.children;)n=r[0];return n}function a(n){for(var r;r=n.children;)n=r[r.length-1];return n}function f(){var n=r,e=1,i=1,f=!1;function c(r){var c,h=0;r.eachAfter((function(r){var e=r.children;e?(r.x=t(e),r.y=u(e)):(r.x=c?h+=n(r,c):0,r.y=0,c=r)}));var l=o(r),p=a(r),d=l.x-n(l,p)/2,s=p.x+n(p,l)/2;return r.eachAfter(f?function(n){n.x=(n.x-r.x)*e,n.y=(r.y-n.y)*i}:function(n){n.x=(n.x-d)/(s-d)*e,n.y=(1-(r.y?n.y/r.y:1))*i})}return c.separation=function(r){return arguments.length?(n=r,c):n},c.size=function(n){return arguments.length?(f=!1,e=+n[0],i=+n[1],c):f?null:[e,i]},c.nodeSize=function(n){return arguments.length?(f=!0,e=+n[0],i=+n[1],c):f?[e,i]:null},c}function c(n){var r=0,t=n.children,e=t&&t.length;if(e)for(;--e>=0;)r+=t[e].value;else r=1;n.value=r}function h(){return this.eachAfter(c)}function l(n){var r=this,t,e=[r],u,i,o;do{for(t=e.reverse(),e=[];r=t.pop();)if(n(r),u=r.children)for(i=0,o=u.length;i<o;++i)e.push(u[i])}while(e.length);return this}function p(n){for(var r=this,t=[r],e,u;r=t.pop();)if(n(r),e=r.children)for(u=e.length-1;u>=0;--u)t.push(e[u]);return this}function d(n){for(var r=this,t=[r],e=[],u,i,o;r=t.pop();)if(e.push(r),u=r.children)for(i=0,o=u.length;i<o;++i)t.push(u[i]);for(;r=e.pop();)n(r);return this}function s(n){return this.eachAfter((function(r){for(var t=+n(r.data)||0,e=r.children,u=e&&e.length;--u>=0;)t+=e[u].value;r.value=t}))}function v(n){return this.eachBefore((function(r){r.children&&r.children.sort(n)}))}function x(n){for(var r=this,t=y(r,n),e=[r];r!==t;)r=r.parent,e.push(r);for(var u=e.length;n!==t;)e.splice(u,0,n),n=n.parent;return e}function y(n,r){if(n===r)return n;var t=n.ancestors(),e=r.ancestors(),u=null;for(n=t.pop(),r=e.pop();n===r;)u=n,n=t.pop(),r=e.pop();return u}function g(){for(var n=this,r=[n];n=n.parent;)r.push(n);return r}function m(){var n=[];return this.each((function(r){n.push(r)})),n}function w(){var n=[];return this.eachBefore((function(r){r.children||n.push(r)})),n}function _(){var n=this,r=[];return n.each((function(t){t!==n&&r.push({source:t.parent,target:t})})),r}function z(n,r){var t=new E(n),e=+n.value&&(t.value=n.value),u,i=[t],o,a,f,c;for(null==r&&(r=M);u=i.pop();)if(e&&(u.value=+u.data.value),(a=r(u.data))&&(c=a.length))for(u.children=new Array(c),f=c-1;f>=0;--f)i.push(o=u.children[f]=new E(a[f])),o.parent=u,o.depth=u.depth+1;return t.eachBefore(q)}function B(){return z(this).eachBefore(A)}function M(n){return n.children}function A(n){n.data=n.data.data}function q(n){var r=0;do{n.height=r}while((n=n.parent)&&n.height<++r)}function E(n){this.data=n,this.depth=this.height=0,this.parent=null}E.prototype=z.prototype={constructor:E,count:h,each:l,eachAfter:d,eachBefore:p,sum:s,sort:v,path:x,ancestors:g,descendants:m,leaves:w,links:_,copy:B};var b=Array.prototype.slice;function S(n){for(var r=n.length,t,e;r;)e=Math.random()*r--|0,t=n[r],n[r]=n[e],n[e]=t;return n}function k(n){for(var r=0,t=(n=S(b.call(n))).length,e=[],u,i;r<t;)u=n[r],i&&j(i,u)?++r:(i=T(e=I(e,u)),r=0);return i}function I(n,r){var t,e;if(R(r,n))return[r];for(t=0;t<n.length;++t)if(O(r,n[t])&&R(L(n[t],r),n))return[n[t],r];for(t=0;t<n.length-1;++t)for(e=t+1;e<n.length;++e)if(O(L(n[t],n[e]),r)&&O(L(n[t],r),n[e])&&O(L(n[e],r),n[t])&&R(P(n[t],n[e],r),n))return[n[t],n[e],r];throw new Error}function O(n,r){var t=n.r-r.r,e=r.x-n.x,u=r.y-n.y;return t<0||t*t<e*e+u*u}function j(n,r){var t=n.r-r.r+1e-6,e=r.x-n.x,u=r.y-n.y;return t>0&&t*t>e*e+u*u}function R(n,r){for(var t=0;t<r.length;++t)if(!j(n,r[t]))return!1;return!0}function T(n){switch(n.length){case 1:return D(n[0]);case 2:return L(n[0],n[1]);case 3:return P(n[0],n[1],n[2])}}function D(n){return{x:n.x,y:n.y,r:n.r}}function L(n,r){var t=n.x,e=n.y,u=n.r,i=r.x,o=r.y,a=r.r,f=i-t,c=o-e,h=a-u,l=Math.sqrt(f*f+c*c);return{x:(t+i+f/l*h)/2,y:(e+o+c/l*h)/2,r:(l+u+a)/2}}function P(n,r,t){var e=n.x,u=n.y,i=n.r,o=r.x,a=r.y,f=r.r,c=t.x,h=t.y,l=t.r,p=e-o,d=e-c,s=u-a,v=u-h,x=f-i,y=l-i,g=e*e+u*u-i*i,m=g-o*o-a*a+f*f,w=g-c*c-h*h+l*l,_=d*s-p*v,z=(s*w-v*m)/(2*_)-e,B=(v*x-s*y)/_,M=(d*m-p*w)/(2*_)-u,A=(p*y-d*x)/_,q=B*B+A*A-1,E=2*(i+z*B+M*A),b=z*z+M*M-i*i,S=-(q?(E+Math.sqrt(E*E-4*q*b))/(2*q):b/E);return{x:e+z+B*S,y:u+M+A*S,r:S}}function $(n,r,t){var e=n.x-r.x,u,i,o=n.y-r.y,a,f,c=e*e+o*o;c?(i=r.r+t.r,i*=i,f=n.r+t.r,i>(f*=f)?(u=(c+f-i)/(2*c),a=Math.sqrt(Math.max(0,f/c-u*u)),t.x=n.x-u*e-a*o,t.y=n.y-u*o+a*e):(u=(c+i-f)/(2*c),a=Math.sqrt(Math.max(0,i/c-u*u)),t.x=r.x+u*e-a*o,t.y=r.y+u*o+a*e)):(t.x=r.x+t.r,t.y=r.y)}function C(n,r){var t=n.r+r.r-1e-6,e=r.x-n.x,u=r.y-n.y;return t>0&&t*t>e*e+u*u}function F(n){var r=n._,t=n.next._,e=r.r+t.r,u=(r.x*t.r+t.x*r.r)/e,i=(r.y*t.r+t.y*r.r)/e;return u*u+i*i}function G(n){this._=n,this.next=null,this.previous=null}function H(n){if(!(u=n.length))return 0;var r,t,e,u,i,o,a,f,c,h,l;if((r=n[0]).x=0,r.y=0,!(u>1))return r.r;if(t=n[1],r.x=-t.r,t.x=r.r,t.y=0,!(u>2))return r.r+t.r;$(t,r,e=n[2]),r=new G(r),t=new G(t),e=new G(e),r.next=e.previous=t,t.next=r.previous=e,e.next=t.previous=r;n:for(a=3;a<u;++a){$(r._,t._,e=n[a]),e=new G(e),f=t.next,c=r.previous,h=t._.r,l=r._.r;do{if(h<=l){if(C(f._,e._)){t=f,r.next=t,t.previous=r,--a;continue n}h+=f._.r,f=f.next}else{if(C(c._,e._)){(r=c).next=t,t.previous=r,--a;continue n}l+=c._.r,c=c.previous}}while(f!==c.next);for(e.previous=r,e.next=t,r.next=t.previous=t=e,i=F(r);(e=e.next)!==t;)(o=F(e))<i&&(r=e,i=o);t=r.next}for(r=[t._],e=t;(e=e.next)!==t;)r.push(e._);for(e=k(r),a=0;a<u;++a)(r=n[a]).x-=e.x,r.y-=e.y;return e.r}function J(n){return H(n),n}function K(n){return null==n?null:N(n)}function N(n){if("function"!=typeof n)throw new Error;return n}function Q(){return 0}function U(n){return function(){return n}}function V(n){return Math.sqrt(n.value)}function W(){var n=null,r=1,t=1,e=Q;function u(u){return u.x=r/2,u.y=t/2,n?u.eachBefore(X(n)).eachAfter(Y(e,.5)).eachBefore(Z(1)):u.eachBefore(X(V)).eachAfter(Y(Q,1)).eachAfter(Y(e,u.r/Math.min(r,t))).eachBefore(Z(Math.min(r,t)/(2*u.r))),u}return u.radius=function(r){return arguments.length?(n=K(r),u):n},u.size=function(n){return arguments.length?(r=+n[0],t=+n[1],u):[r,t]},u.padding=function(n){return arguments.length?(e="function"==typeof n?n:U(+n),u):e},u}function X(n){return function(r){r.children||(r.r=Math.max(0,+n(r)||0))}}function Y(n,r){return function(t){if(e=t.children){var e,u,i=e.length,o=n(t)*r||0,a;if(o)for(u=0;u<i;++u)e[u].r+=o;if(a=H(e),o)for(u=0;u<i;++u)e[u].r-=o;t.r=a+o}}}function Z(n){return function(r){var t=r.parent;r.r*=n,t&&(r.x=t.x+n*r.x,r.y=t.y+n*r.y)}}function nn(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function rn(n,r,t,e,u){for(var i=n.children,o,a=-1,f=i.length,c=n.value&&(e-r)/n.value;++a<f;)(o=i[a]).y0=t,o.y1=u,o.x0=r,o.x1=r+=o.value*c}function tn(){var n=1,r=1,t=0,e=!1;function u(u){var o=u.height+1;return u.x0=u.y0=t,u.x1=n,u.y1=r/o,u.eachBefore(i(r,o)),e&&u.eachBefore(nn),u}function i(n,r){return function(e){e.children&&rn(e,e.x0,n*(e.depth+1)/r,e.x1,n*(e.depth+2)/r);var u=e.x0,i=e.y0,o=e.x1-t,a=e.y1-t;o<u&&(u=o=(u+o)/2),a<i&&(i=a=(i+a)/2),e.x0=u,e.y0=i,e.x1=o,e.y1=a}}return u.round=function(n){return arguments.length?(e=!!n,u):e},u.size=function(t){return arguments.length?(n=+t[0],r=+t[1],u):[n,r]},u.padding=function(n){return arguments.length?(t=+n,u):t},u}var en="$",un={depth:-1},on={};function an(n){return n.id}function fn(n){return n.parentId}function cn(){var n=an,r=fn;function t(t){var e,u,i=t.length,o,a,f,c=new Array(i),h,l,p={};for(u=0;u<i;++u)e=t[u],f=c[u]=new E(e),null!=(h=n(e,u,t))&&(h+="")&&(p[l=en+(f.id=h)]=l in p?on:f);for(u=0;u<i;++u)if(f=c[u],null!=(h=r(t[u],u,t))&&(h+="")){if(!(a=p[en+h]))throw new Error("missing: "+h);if(a===on)throw new Error("ambiguous: "+h);a.children?a.children.push(f):a.children=[f],f.parent=a}else{if(o)throw new Error("multiple roots");o=f}if(!o)throw new Error("no root");if(o.parent=un,o.eachBefore((function(n){n.depth=n.parent.depth+1,--i})).eachBefore(q),o.parent=null,i>0)throw new Error("cycle");return o}return t.id=function(r){return arguments.length?(n=N(r),t):n},t.parentId=function(n){return arguments.length?(r=N(n),t):r},t}function hn(n,r){return n.parent===r.parent?1:2}function ln(n){var r=n.children;return r?r[0]:n.t}function pn(n){var r=n.children;return r?r[r.length-1]:n.t}function dn(n,r,t){var e=t/(r.i-n.i);r.c-=e,r.s+=t,n.c+=e,r.z+=t,r.m+=t}function sn(n){for(var r=0,t=0,e=n.children,u=e.length,i;--u>=0;)(i=e[u]).z+=r,i.m+=r,r+=i.s+(t+=i.c)}function vn(n,r,t){return n.a.parent===r.parent?n.a:t}function xn(n,r){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=r}function yn(n){for(var r=new xn(n,0),t,e=[r],u,i,o,a;t=e.pop();)if(i=t._.children)for(t.children=new Array(a=i.length),o=a-1;o>=0;--o)e.push(u=t.children[o]=new xn(i[o],o)),u.parent=t;return(r.parent=new xn(null,0)).children=[r],r}function gn(){var n=hn,r=1,t=1,e=null;function u(u){var a=yn(u);if(a.eachAfter(i),a.parent.m=-a.z,a.eachBefore(o),e)u.eachBefore(f);else{var c=u,h=u,l=u;u.eachBefore((function(n){n.x<c.x&&(c=n),n.x>h.x&&(h=n),n.depth>l.depth&&(l=n)}));var p=c===h?1:n(c,h)/2,d=p-c.x,s=r/(h.x+p+d),v=t/(l.depth||1);u.eachBefore((function(n){n.x=(n.x+d)*s,n.y=n.depth*v}))}return u}function i(r){var t=r.children,e=r.parent.children,u=r.i?e[r.i-1]:null;if(t){sn(r);var i=(t[0].z+t[t.length-1].z)/2;u?(r.z=u.z+n(r._,u._),r.m=r.z-i):r.z=i}else u&&(r.z=u.z+n(r._,u._));r.parent.A=a(r,u,r.parent.A||e[0])}function o(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function a(r,t,e){if(t){for(var u=r,i=r,o=t,a=u.parent.children[0],f=u.m,c=i.m,h=o.m,l=a.m,p;o=pn(o),u=ln(u),o&&u;)a=ln(a),(i=pn(i)).a=r,(p=o.z+h-u.z-f+n(o._,u._))>0&&(dn(vn(o,r,e),r,p),f+=p,c+=p),h+=o.m,f+=u.m,l+=a.m,c+=i.m;o&&!pn(i)&&(i.t=o,i.m+=h-c),u&&!ln(a)&&(a.t=u,a.m+=f-l,e=r)}return e}function f(n){n.x*=r,n.y=n.depth*t}return u.separation=function(r){return arguments.length?(n=r,u):n},u.size=function(n){return arguments.length?(e=!1,r=+n[0],t=+n[1],u):e?null:[r,t]},u.nodeSize=function(n){return arguments.length?(e=!0,r=+n[0],t=+n[1],u):e?[r,t]:null},u}function mn(n,r,t,e,u){for(var i=n.children,o,a=-1,f=i.length,c=n.value&&(u-t)/n.value;++a<f;)(o=i[a]).x0=r,o.x1=e,o.y0=t,o.y1=t+=o.value*c}xn.prototype=Object.create(E.prototype);var wn=(1+Math.sqrt(5))/2;function _n(n,r,t,e,u,i){for(var o=[],a=r.children,f,c,h=0,l=0,p=a.length,d,s,v=r.value,x,y,g,m,w,_,z;h<p;){d=u-t,s=i-e;do{x=a[l++].value}while(!x&&l<p);for(y=g=x,z=x*x*(_=Math.max(s/d,d/s)/(v*n)),w=Math.max(g/z,z/y);l<p;++l){if(x+=c=a[l].value,c<y&&(y=c),c>g&&(g=c),z=x*x*_,(m=Math.max(g/z,z/y))>w){x-=c;break}w=m}o.push(f={value:x,dice:d<s,children:a.slice(h,l)}),f.dice?rn(f,t,e,u,v?e+=s*x/v:i):mn(f,t,e,v?t+=d*x/v:u,i),v-=x,h=l}return o}var zn=function n(r){function t(n,t,e,u,i){_n(r,n,t,e,u,i)}return t.ratio=function(r){return n((r=+r)>1?r:1)},t}(wn);function Bn(){var n=zn,r=!1,t=1,e=1,u=[0],i=Q,o=Q,a=Q,f=Q,c=Q;function h(n){return n.x0=n.y0=0,n.x1=t,n.y1=e,n.eachBefore(l),u=[0],r&&n.eachBefore(nn),n}function l(r){var t=u[r.depth],e=r.x0+t,h=r.y0+t,l=r.x1-t,p=r.y1-t;l<e&&(e=l=(e+l)/2),p<h&&(h=p=(h+p)/2),r.x0=e,r.y0=h,r.x1=l,r.y1=p,r.children&&(t=u[r.depth+1]=i(r)/2,e+=c(r)-t,h+=o(r)-t,(l-=a(r)-t)<e&&(e=l=(e+l)/2),(p-=f(r)-t)<h&&(h=p=(h+p)/2),n(r,e,h,l,p))}return h.round=function(n){return arguments.length?(r=!!n,h):r},h.size=function(n){return arguments.length?(t=+n[0],e=+n[1],h):[t,e]},h.tile=function(r){return arguments.length?(n=N(r),h):n},h.padding=function(n){return arguments.length?h.paddingInner(n).paddingOuter(n):h.paddingInner()},h.paddingInner=function(n){return arguments.length?(i="function"==typeof n?n:U(+n),h):i},h.paddingOuter=function(n){return arguments.length?h.paddingTop(n).paddingRight(n).paddingBottom(n).paddingLeft(n):h.paddingTop()},h.paddingTop=function(n){return arguments.length?(o="function"==typeof n?n:U(+n),h):o},h.paddingRight=function(n){return arguments.length?(a="function"==typeof n?n:U(+n),h):a},h.paddingBottom=function(n){return arguments.length?(f="function"==typeof n?n:U(+n),h):f},h.paddingLeft=function(n){return arguments.length?(c="function"==typeof n?n:U(+n),h):c},h}function Mn(n,r,t,e,u){var i=n.children,o,a=i.length,f,c=new Array(a+1);for(c[0]=f=o=0;o<a;++o)c[o+1]=f+=i[o].value;function h(n,r,t,e,u,o,a){if(n>=r-1){var f=i[n];return f.x0=e,f.y0=u,f.x1=o,void(f.y1=a)}for(var l=c[n],p=t/2+l,d=n+1,s=r-1;d<s;){var v=d+s>>>1;c[v]<p?d=v+1:s=v}p-c[d-1]<c[d]-p&&n+1<d&&--d;var x=c[d]-l,y=t-x;if(o-e>a-u){var g=(e*y+o*x)/t;h(n,d,x,e,u,g,a),h(d,r,y,g,u,o,a)}else{var m=(u*y+a*x)/t;h(n,d,x,e,u,o,m),h(d,r,y,e,m,o,a)}}h(0,a,n.value,r,t,e,u)}function An(n,r,t,e,u){(1&n.depth?mn:rn)(n,r,t,e,u)}var qn=function n(r){function t(n,t,e,u,i){if((o=n._squarify)&&o.ratio===r)for(var o,a,f,c,h=-1,l,p=o.length,d=n.value;++h<p;){for(f=(a=o[h]).children,c=a.value=0,l=f.length;c<l;++c)a.value+=f[c].value;a.dice?rn(a,t,e,u,e+=(i-e)*a.value/d):mn(a,t,e,t+=(u-t)*a.value/d,i),d-=a.value}else n._squarify=o=_n(r,n,t,e,u,i),o.ratio=r}return t.ratio=function(r){return n((r=+r)>1?r:1)},t}(wn);n.cluster=f,n.hierarchy=z,n.pack=W,n.packEnclose=k,n.packSiblings=J,n.partition=tn,n.stratify=cn,n.tree=gn,n.treemap=Bn,n.treemapBinary=Mn,n.treemapDice=rn,n.treemapResquarify=qn,n.treemapSlice=mn,n.treemapSliceDice=An,n.treemapSquarify=zn,Object.defineProperty(n,"__esModule",{value:!0})},"object"==typeof r&&void 0!==t?u(r):"function"==typeof define&&define.amd?define(["exports"],u):u((e=e||self).d3=e.d3||{})}

