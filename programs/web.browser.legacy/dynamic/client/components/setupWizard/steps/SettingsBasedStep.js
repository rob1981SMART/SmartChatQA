function module(e,t,n){var r,a,u,i,l,o,c,s,f,d,p,m,v,g,k,E,S,b,h,y,x,T,F,w,C;n.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){a=e}},1),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){u=e}},2),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){i=e}},3),n.export({SettingsBasedStep:function(){return L}}),n.link("@rocket.chat/fuselage",{Field:function(e){l=e},FieldGroup:function(e){o=e},Flex:function(e){c=e},InputBox:function(e){s=e},Margins:function(e){f=e},Select:function(e){d=e},Skeleton:function(e){p=e},TextInput:function(e){m=e}},0),n.link("react",{default:function(e){v=e},useEffect:function(e){g=e},useReducer:function(e){k=e},useState:function(e){E=e}},1),n.link("../../../contexts/SettingsContext",{useBatchSettingsDispatch:function(e){S=e}},2),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){b=e}},3),n.link("../../../contexts/TranslationContext",{useTranslation:function(e){h=e},useLanguages:function(e){y=e}},4),n.link("../../../hooks/useFocus",{useFocus:function(e){x=e}},5),n.link("../Pager",{Pager:function(e){T=e}},6),n.link("../SetupWizardState",{useSetupWizardContext:function(e){F=e}},7),n.link("../Step",{Step:function(e){w=e}},8),n.link("../StepHeader",{StepHeader:function(e){C=e}},9);var _=function(){var e="RESET",t="SET_VALUE",n=k((function(n,r){var a=r.type,i=r.payload;if(a===e)return i;if(a===t){var l=i._id,o=i.value;return n.map((function(e){return e._id===l?u({},e,{value:o}):e}))}return n}),[]),r=i(n,2),a=r[0],l=r[1],o,c;return{fields:a,resetFields:function(t){return l({type:e,payload:t})},setFieldValue:function(e,n){return l({type:t,payload:{_id:e,value:n}})}}};function L(e){var t=e.step,n=e.title,k=e.active,L=F(),z=L.settings,q=L.currentStep,B=L.goToPreviousStep,D=L.goToNextStep,P=_(),A=P.fields,I=P.resetFields,M=P.setFieldValue,R=E(!1),V=i(R,2),W=V[0],j=V[1],H=y();g((function(){I(z.filter((function(e){var n;return e.wizard.step===t})).filter((function(e){var t=e.type;return["string","select","language","boolean"].includes(t)})).sort((function(e,t){var n,r;return e.wizard.order-t.wizard.order})).map((function(e){var t=e.value,n=a(e,["value"]);return u({},n,{value:null!=t?t:""})})))}),[z,q]);var N=h(),G=S(),U=x(k),Y=b(),J=function(){B()},K=function(){function e(e){return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),j(!0),t.prev=2,t.next=5,r.awrap(G(A.map((function(e){var t,n;return{_id:e._id,value:e.value}}))));case 5:D(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),Y({type:"error",message:t.t0});case 11:return t.prev=11,j(!1),t.finish(11);case 14:case"end":return t.stop()}}return t}(),null,null,[[2,8,11,14]])}return e}();return 0===A.length?v.createElement(w,{active:k,working:W,onSubmit:K},v.createElement(C,{number:t,title:n}),v.createElement(f,{blockEnd:"x32"},v.createElement(o,null,Array.from({length:5},(function(e,t){return v.createElement(l,{key:t},v.createElement(c.Item,{align:"stretch"},v.createElement(l.Label,null,v.createElement(p,{width:"50%"}))),v.createElement(s.Skeleton,null))}))))):v.createElement(w,{active:k,working:W,onSubmit:K},v.createElement(C,{number:t,title:n}),v.createElement(f,{blockEnd:"x32"},v.createElement(o,null,A.map((function(e,t){var n=e._id,r=e.type,a=e.i18nLabel,u=e.value,o=e.values;return v.createElement(l,{key:t},v.createElement(l.Label,{htmlFor:n},N(a)),v.createElement(l.Row,null,"string"===r&&v.createElement(m,{type:"text","data-qa":n,id:n,name:n,ref:0===t?U:void 0,value:u,onChange:function(e){var t=e.currentTarget.value;return M(n,t)}}),"select"===r&&v.createElement(d,{type:"select","data-qa":n,id:n,name:n,placeholder:N("Select_an_option"),value:u,onChange:function(e){return M(n,e)},options:o.map((function(e){var t=e.i18nLabel,n;return[e.key,N(t)]}))}),"boolean"===r&&v.createElement(d,{type:"select","data-qa":n,id:n,name:n,ref:0===t?U:void 0,value:String(u),onChange:function(e){return M(n,"true"===e)},options:[["true",N("Yes")],["false",N("No")]]}),"language"===r&&v.createElement(d,{type:"select","data-qa":n,id:n,name:n,placeholder:N("Default"),value:u,onChange:function(e){return M(n,e)},options:H.map((function(e){var t,n;return[e.key,e.name]})).sort((function(e,t){var n,r,a,u;return i(e,1)[0]-i(t,1)[0]}))})))})))),v.createElement(T,{disabled:W,onBackClick:q>2&&J}))}}

