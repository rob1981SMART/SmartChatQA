function module(e,t,r){var n,o,a,i,c,s,l,p;r.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){n=e}},0),r.export({updateRecentEmoji:function(){return k}}),r.link("underscore",{default:function(e){o=e}},0),r.link("meteor/reactive-var",{ReactiveVar:function(e){a=e}},1),r.link("meteor/reactive-dict",{ReactiveDict:function(e){i=e}},2),r.link("meteor/templating",{Template:function(e){c=e}},3),r.link("../../utils/client",{t:function(e){s=e}},4),r.link("./lib/EmojiPicker",{EmojiPicker:function(e){l=e}},5),r.link("../lib/rocketchat",{emoji:function(e){p=e}},6),r.link("./emojiPicker.html"),r.link("../../theme/client/imports/components/emojiPicker.css");var g=27,u=new i("emojiList"),m=function(e,t){return t&&'<li class="emoji-'+e+' emoji-picker-item" data-emoji="'+e+'" title="'+e+'">'+t+"</li>"},f=function(e,t){var r;return Object.values(p.packages).map((function(r){if(r.emojisByCategory&&r.emojisByCategory[e])return r.emojisByCategory[e].map((function(e){var n=t>0&&r.toneList.hasOwnProperty(e)?"_tone"+t:"";return m(e,r.renderPicker(":"+e+n+":"))})).join("")})).join("")||"<li>"+s("No_emojis_found")+"</li>"};function k(e){u.set(e,f(e))}var j=function(e){var t=e.categoriesList,r=e.tone;t.forEach((function(e){return u.set(e.key,f(e.key,r))}))};function v(e){var t='<ul class="emoji-list">',r,n=c.instance().tone;l.currentCategory.set("");var o=new RegExp(RegExp.escape(e.replace(/:/g,"")),"i");for(var a in meteorBabelHelpers.sanitizeForInObject(p.list))if(p.list.hasOwnProperty(a)&&o.test(a)){var i=p.list[a],s=i.emojiPackage,g=i.shortnames,u="";a=a.replace(/:/g,"");var f=void 0!==g[0]?g[0].replace(/:/g,""):g[0];n>0&&p.packages[s].toneList.hasOwnProperty(p)&&(u="_tone"+n);var k=!1;for(var j in meteorBabelHelpers.sanitizeForInObject(p.packages[s].emojisByCategory))if(p.packages[s].emojisByCategory.hasOwnProperty(j)){var v=p.packages[s].emojisByCategory[j],y=void 0!==f?f.replace(/:/g,"").split("_"):f;if(-1!==v.indexOf(a)||void 0!==y&&y.includes(e)){k=!0;break}}if(k){var h=p.packages[s].renderPicker(":"+a+u+":");t+=m(a,h)}}return t+="</ul>"}c.emojiPicker.helpers({emojiCategories:function(){return c.instance().categoriesList},emojiByCategory:function(e){var t=[];for(var r in meteorBabelHelpers.sanitizeForInObject(p.packages))p.packages.hasOwnProperty(r)&&p.packages[r].emojisByCategory.hasOwnProperty(e)&&(t=t.concat(p.packages[r].emojisByCategory[e]));return t},searching:function(){return c.instance().currentSearchTerm.get().length>0},searchResults:function(){return v(c.instance().currentSearchTerm.get())},emojiList:function(e){return u.get(e)},currentTone:function(){return"tone-"+c.instance().tone},activeCategory:function(e){return l.currentCategory.get()===e?"active":""},currentCategory:function(){return l.currentCategory.get()}}),c.emojiPicker.events({"click .emoji-picker":function(e){e.stopPropagation(),e.preventDefault()},"click .category-link":function(e){return e.stopPropagation(),e.preventDefault(),l.showCategory(e.currentTarget.hash.substr(1)),!1},"scroll .emojis":o.throttle((function(e,t){if(!l.scrollingToCategory){var r,n=t.$(e.currentTarget).scrollTop()+8,o=l.getCategoryPositions().filter((function(e){return e.top<=n})).pop();if(o){var a,i=o.el.id.replace("emoji-list-category-","");l.currentCategory.set(i)}}}),300),"click .change-tone > a":function(e,t){e.stopPropagation(),e.preventDefault(),t.$(".tone-selector").toggleClass("show")},"click .tone-selector .tone":function(e,t){e.stopPropagation(),e.preventDefault();var r=parseInt(e.currentTarget.dataset.tone),n;for(var o in n=r>0?"_tone"+r:"",meteorBabelHelpers.sanitizeForInObject(p.packages))if(p.packages.hasOwnProperty(o)&&p.packages[o].hasOwnProperty("toneList"))for(var a in meteorBabelHelpers.sanitizeForInObject(p.packages[o].toneList))p.packages[o].toneList.hasOwnProperty(a)&&$(".emoji-"+a).html(p.packages[o].render(":"+a+n+":"));l.setTone(r),t.setCurrentTone(r),$(".tone-selector").toggleClass("show")},"click .emoji-list .emoji-picker-item":function(e,t){e.stopPropagation();var r=e.currentTarget.dataset.emoji,n=t.tone,o="";for(var a in meteorBabelHelpers.sanitizeForInObject(p.packages))p.packages.hasOwnProperty(a)&&n>0&&p.packages[a].toneList.hasOwnProperty(r)&&(o="_tone"+n);var i=$(".emoji-picker .js-emojipicker-search");i&&i.val(""),t.currentSearchTerm.set(""),l.pickEmoji(r+o)},"keyup .js-emojipicker-search, change .js-emojipicker-search":function(e,t){if(e.preventDefault(),e.stopPropagation(),27===e.keyCode)return l.close();var r=e.target.value.trim(),n=t.currentSearchTerm;r!==n.get()&&n.set(r)}}),c.emojiPicker.onCreated((function(){var e=this;this.tone=l.getTone();var t=l.getRecent();for(var r in this.currentSearchTerm=new a(""),this.categoriesList=[],meteorBabelHelpers.sanitizeForInObject(p.packages)){var o;if(p.packages.hasOwnProperty(r))if(p.packages[r].emojiCategories)if(void 0!==p.packages[r].categoryIndex)(o=this.categoriesList).splice.apply(o,[p.packages[r].categoryIndex,0].concat(n(p.packages[r].emojiCategories)));else this.categoriesList=this.categoriesList.concat(p.packages[r].emojiCategories)}t.forEach((function(e){p.packages.base.emojisByCategory.recent.push(e)})),this.setCurrentTone=function(t){$(".current-tone").removeClass("tone-"+e.tone),$(".current-tone").addClass("tone-"+t),e.tone=t},j(this)}))}

