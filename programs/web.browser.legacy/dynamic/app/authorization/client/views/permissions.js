function module(e,t,i){var n,s,r,o,a,c,u,l,f,m,p,d,g,v;i.link("meteor/meteor",{Meteor:function(e){n=e}},0),i.link("underscore",{default:function(e){s=e}},1),i.link("underscore.string",{default:function(e){r=e}},2),i.link("meteor/reactive-dict",{ReactiveDict:function(e){o=e}},3),i.link("meteor/tracker",{Tracker:function(e){a=e}},4),i.link("meteor/templating",{Template:function(e){c=e}},5),i.link("../../../models/client",{Roles:function(e){u=e}},6),i.link("../lib/ChatPermissions",{ChatPermissions:function(e){l=e}},7),i.link("../hasPermission",{hasAllPermission:function(e){f=e}},8),i.link("../../../utils/client",{t:function(e){m=e}},9),i.link("../../../ui-utils/client/lib/SideNav",{SideNav:function(e){p=e}},10),i.link("../../lib",{CONSTANTS:function(e){d=e},AuthorizationUtils:function(e){g=e}},11),i.link("..",{hasAtLeastOnePermission:function(e){v=e}},12),c.permissions.helpers({tabsData:function(){var e,t=c.instance().state,i={label:m("Permissions"),value:"permissions",condition:function(){return!0}},n={label:m("Settings"),value:"settings",condition:function(){return!0}},s=[i],r=f("access-setting-permissions");switch(r&&s.push(n),r&&t.get("tab")){case"settings":n.active=!0;break;case"permissions":i.active=!0;break;default:i.active=!0}return{tabs:s,onChange:function(e){t.set({tab:e,size:50})}}},roles:function(){return u.find()},permissions:function(){var e,t=c.instance().state,i=t.get("size"),n=new RegExp(r.escapeRegExp(t.get("filter")),"i");return l.find({level:{$ne:d.SETTINGS_LEVEL},_id:n},{sort:{_id:1},limit:i})},settingPermissions:function(){var e,t=c.instance().state,i=t.get("size"),n=new RegExp(r.escapeRegExp(t.get("filter")),"i");return l.find({_id:n,level:d.SETTINGS_LEVEL,group:{$exists:!0}},{limit:i,sort:{group:1,section:1}})},hasPermission:function(){return f("access-permissions")},hasNoPermission:function(){return!v(["access-permissions","access-setting-permissions"])},filter:function(){return c.instance().state.get("filter")},tab:function(){return c.instance().state.get("tab")}}),c.permissions.events({"keyup #permissions-filter":function(e,t){e.stopPropagation(),e.preventDefault(),t.state.set("filter",e.currentTarget.value)},"scroll .content":s.throttle((function(e,t){var i=e.currentTarget;if(i.offsetHeight+i.scrollTop>=i.scrollHeight-100)return t.state.set("size",t.state.get("size")+50)}),300)}),c.permissions.onCreated((function(){var e=this;this.state=new o({filter:"",tab:"",size:50}),this.autorun((function(){e.state.get("filter"),e.state.set("size",50)}))})),c.permissionsTable.helpers({granted:function(e,t){return e&&~e.indexOf(t._id)?"checked":null},permissionName:function(e){if(e.level===d.SETTINGS_LEVEL){var t="";return e.group&&(t=m(e.group)+" > "),e.section&&(t=""+t+m(e.section)+" > "),""+t+m(e.settingId)}return m(e._id)},permissionDescription:function(e){return m(e._id+"_description")},isRolePermissionEnabled:function(e,t){return!g.isPermissionRestrictedForRole(t._id,e._id)}}),c.permissionsTable.events({"click .role-permission":function(e){var t=e.currentTarget.getAttribute("data-permission"),i=e.currentTarget.getAttribute("data-role"),s,r=~(t&&l.findOne(t)).roles.indexOf(i)?"authorization:removeRoleFromPermission":"authorization:addPermissionToRole";return n.call(r,t,i)}}),c.permissions.onRendered((function(){a.afterFlush((function(){p.setFlex("adminFlex"),p.openFlex()}))}))}

