function module(e,t,n){var r,a,o,i,u,c,s,l,p,f,m,d,g,x,k,v,b,h,E;function C(){var e=m(),t=x(),n=v(l(null)),C=a(n,2),y=C[0],I=C[1],S=v(l("Loading...")),_=a(S,2),T=_[0],w=_[1],D=v(l(0)),R=a(D,2),L=R[0],P=R[1],M=v(l(0)),F=a(M,2),O=F[0],U=F[1],W=b("GET","getCurrentImportOperation"),j=b("GET","getImportProgress"),A=h("admin-import"),B=h("admin-import-prepare");s((function(){var n;(function(){function n(){var n,a;return r.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r.awrap(W());case 3:if(n=o.sent,(a=n.operation).valid){o.next=8;break}return A.push(),o.abrupt("return");case 8:if(g.includes(a.status)){o.next=11;break}return B.push(),o.abrupt("return");case 11:I(a.importerKey),P(a.count.completed),U(a.count.total),o.next=20;break;case 16:o.prev=16,o.t0=o.catch(0),t({type:"error",message:o.t0||e("Failed_To_Load_Import_Data")}),A.push();case 20:case"end":return o.stop()}}return o}(),null,null,[[0,16]])}return n})()()}),[]),s((function(){if(y){var n=function(n){var r=n.key,a=n.step,o=n.count,i=(o=void 0===o?{}:o).completed,u=void 0===i?0:i,c=o.total,s=void 0===c?0:c;if(r.toLowerCase()===y)switch(a){case d.DONE:return t({type:"success",message:e(a[0].toUpperCase()+a.slice(1))}),void A.push();case d.ERROR:case d.CANCELLED:return t({type:"error",message:e(a[0].toUpperCase()+a.slice(1))}),void A.push();default:w(a),P(u),U(s)}},a;return function(){function a(){var a;return r.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r.awrap(j());case 3:if(a=o.sent){o.next=8;break}return t({type:"warning",message:e("Importer_not_in_progress")}),B.push(),o.abrupt("return");case 8:k.registerCallback(n),n(a),o.next=16;break;case 12:o.prev=12,o.t0=o.catch(0),t({type:"error",message:o.t0||e("Failed_To_Load_Import_Data")}),A.push();case 16:case"end":return o.stop()}}return o}(),null,null,[[0,12]])}return a}()(),function(){k.unregisterCallback(n)}}}),[y]);var G=p((function(){return 0===O?null:L/O*100}));return c.createElement(E,null,c.createElement(E.Header,{title:e("Importing_Data")}),c.createElement(E.ContentShadowScroll,null,c.createElement(o,{marginInline:"auto",marginBlock:"neg-x24",width:"full",maxWidth:"x580"},c.createElement(i,{block:"x24"},c.createElement(o,{is:"p",textStyle:"p1",textColor:"default"},e(T[0].toUpperCase()+T.slice(1))),G?c.createElement(o,{display:"flex",justifyContent:"center",textStyle:"p1",textColor:"default"},c.createElement(o,{is:"progress",value:L,max:O,marginInlineEnd:"x24"}),c.createElement(o,{is:"span"},L,"/",O," (",f.numberFormat(G,0),"%)")):c.createElement(u,{justifyContent:"center"})))))}n.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},1),n.link("@rocket.chat/fuselage",{Box:function(e){o=e},Margins:function(e){i=e},Throbber:function(e){u=e}},0),n.link("react",{default:function(e){c=e},useEffect:function(e){s=e},useState:function(e){l=e},useMemo:function(e){p=e}},1),n.link("underscore.string",{default:function(e){f=e}},2),n.link("../../../../client/contexts/TranslationContext",{useTranslation:function(e){m=e}},3),n.link("../../lib/ImporterProgressStep",{ProgressStep:function(e){d=e},ImportingStartedStates:function(e){g=e}},4),n.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){x=e}},5),n.link("../ImporterWebsocketReceiver",{ImporterWebsocketReceiver:function(e){k=e}},6),n.link("../../../../client/hooks/useSafely",{useSafely:function(e){v=e}},7),n.link("../../../../client/contexts/ServerContext",{useEndpoint:function(e){b=e}},8),n.link("../../../../client/contexts/RouterContext",{useRoute:function(e){h=e}},9),n.link("../../../../client/components/basic/Page",{Page:function(e){E=e}},10),n.exportDefault(C)}

