function module(e,t,n){var r,l,a,o,i,c,s,u,m,p,f,d,E,h,v,g,k,_,x;function w(){var e,t=d(),n=E(),w=_(u(!0)),y=a(w,2),C=y[0],S=y[1],b=_(u()),T=a(b,2),F=T[0],I=T[1],P=_(u([])),D=a(P,2),O=D[0],L=D[1],M=v("GET","getCurrentImportOperation"),R=v("GET","getLatestImportOperations"),B=v("POST","downloadPendingFiles"),G=h("admin-import-new"),H=h("admin-import-progress");m((function(){var e;(function(){function e(){var e,r,a;return l.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:return S(!0),o.prev=1,o.next=4,l.awrap(M());case 4:e=o.sent,r=e.operation,I(r),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(1),n({type:"error",message:t("Failed_To_Load_Import_Operation")});case 12:return o.prev=12,o.next=15,l.awrap(R());case 15:a=o.sent,L(a),o.next=22;break;case 19:o.prev=19,o.t1=o.catch(12),n({type:"error",message:t("Failed_To_Load_Import_History")});case 22:S(!1);case 23:case"end":return o.stop()}}return o}(),null,null,[[1,9],[12,19]])}return e})()()}),[]);var N=p((function(){return null==O?void 0:O.some((function(e){var t=e.importerKey,n=e.status;return"slack"===t&&n===g.DONE}))}),[O]),A=function(){G.push()},U=function(){function e(){var e,r;return l.async(function(){function a(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,S(!0),a.next=4,l.awrap(B());case 4:if(e=a.sent,!(r=e.count)){a.next=10;break}return n({type:"info",message:t("No_files_left_to_download")}),S(!1),a.abrupt("return");case 10:n({type:"info",message:t("File_Downloads_Started")}),H.push(),a.next=19;break;case 14:a.prev=14,a.t0=a.catch(0),console.error(a.t0),n({type:"error",message:t("Failed_To_Download_Files")}),S(!1);case 19:case"end":return a.stop()}}return a}(),null,null,[[0,14]])}return e}(),K=x("(max-width: 768px)");return s.createElement(f,null,s.createElement(f.Header,{title:t("Import")},s.createElement(i,null,s.createElement(o,{primary:!0,disabled:C,onClick:A},t("Import_New_File")),N&&s.createElement(o,{disabled:C,onClick:U},t("Download_Pending_Files")))),s.createElement(f.ContentShadowScroll,null,s.createElement(c,{fixed:!0},s.createElement(c.Head,null,s.createElement(c.Row,null,s.createElement(c.Cell,{is:"th",rowSpan:2,width:"x140"},t("Import_Type")),s.createElement(c.Cell,{is:"th",rowSpan:2},t("Last_Updated")),!K&&s.createElement(s.Fragment,null,s.createElement(c.Cell,{is:"th",rowSpan:2},t("Last_Status")),s.createElement(c.Cell,{is:"th",rowSpan:2},t("File")),s.createElement(c.Cell,{is:"th",align:"center",colSpan:4,width:"x320"},t("Counters")))),!K&&s.createElement(c.Row,null,s.createElement(c.Cell,{is:"th",align:"center"},t("Users")),s.createElement(c.Cell,{is:"th",align:"center"},t("Channels")),s.createElement(c.Cell,{is:"th",align:"center"},t("Messages")),s.createElement(c.Cell,{is:"th",align:"center"},t("Total")))),s.createElement(c.Body,null,C?Array.from({length:20},(function(e,t){return s.createElement(k.Skeleton,{small:K,key:t})})):s.createElement(s.Fragment,null,(null==F?void 0:F.valid)&&s.createElement(k,r({},F,{small:K})),null==O?void 0:null===(e=O.filter((function(e){var t=e._id;return(null==F?void 0:F._id)!==t||!(null==F?void 0:F.valid)})))||void 0===e?void 0:e.map((function(e){return s.createElement(k,r({key:e._id},e,{valid:!1,small:K}))})))))))}n.link("@babel/runtime/helpers/extends",{default:function(e){r=e}},0),n.link("@babel/runtime/regenerator",{default:function(e){l=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},2),n.link("@rocket.chat/fuselage",{Button:function(e){o=e},ButtonGroup:function(e){i=e},Table:function(e){c=e}},0),n.link("react",{default:function(e){s=e},useState:function(e){u=e},useEffect:function(e){m=e},useMemo:function(e){p=e}},1),n.link("../../../../client/components/basic/Page",{Page:function(e){f=e}},2),n.link("../../../../client/contexts/TranslationContext",{useTranslation:function(e){d=e}},3),n.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){E=e}},4),n.link("../../../../client/contexts/RouterContext",{useRoute:function(e){h=e}},5),n.link("../../../../client/contexts/ServerContext",{useEndpoint:function(e){v=e}},6),n.link("../../lib/ImporterProgressStep",{ProgressStep:function(e){g=e}},7),n.link("./ImportOperationSummary",{default:function(e){k=e}},8),n.link("../../../../client/hooks/useSafely",{useSafely:function(e){_=e}},9),n.link("../../../ui/client/views/app/components/hooks",{useMediaQuery:function(e){x=e}},10),n.exportDefault(w)}

