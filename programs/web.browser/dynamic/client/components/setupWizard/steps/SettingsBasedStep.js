function module(e,t,l){let a,n,r,i,u,o,s,c,d,p,m,g,E,k,S,v,f,y,h,b,x,F,T;l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){a=e}},0),l.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},1),l.export({SettingsBasedStep:()=>_}),l.link("@rocket.chat/fuselage",{Field(e){r=e},FieldGroup(e){i=e},Flex(e){u=e},InputBox(e){o=e},Margins(e){s=e},Select(e){c=e},Skeleton(e){d=e},TextInput(e){p=e}},0),l.link("react",{default(e){m=e},useEffect(e){g=e},useReducer(e){E=e},useState(e){k=e}},1),l.link("../../../contexts/SettingsContext",{useBatchSettingsDispatch(e){S=e}},2),l.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){v=e}},3),l.link("../../../contexts/TranslationContext",{useTranslation(e){f=e},useLanguages(e){y=e}},4),l.link("../../../hooks/useFocus",{useFocus(e){h=e}},5),l.link("../Pager",{Pager(e){b=e}},6),l.link("../SetupWizardState",{useSetupWizardContext(e){x=e}},7),l.link("../Step",{Step(e){F=e}},8),l.link("../StepHeader",{StepHeader(e){T=e}},9);const C=()=>{const e="RESET",t="SET_VALUE",[l,a]=E((l,a)=>{let{type:r,payload:i}=a;if(r===e)return i;if(r===t){const{_id:e,value:t}=i;return l.map(l=>l._id===e?n({},l,{value:t}):l)}return l},[]),r=t=>a({type:e,payload:t}),i=(e,l)=>a({type:t,payload:{_id:e,value:l}});return{fields:l,resetFields:r,setFieldValue:i}};function _(e){let{step:t,title:l,active:E}=e;const{settings:_,currentStep:w,goToPreviousStep:L,goToNextStep:z}=x(),{fields:q,resetFields:B,setFieldValue:D}=C(),[P,I]=k(!1),M=y();g(()=>{B(_.filter(e=>{let{wizard:l}=e;return l.step===t}).filter(e=>{let{type:t}=e;return["string","select","language","boolean"].includes(t)}).sort((e,t)=>{let{wizard:{order:l}}=e,{wizard:{order:a}}=t;return l-a}).map(e=>{let{value:t}=e,l=a(e,["value"]);return n({},l,{value:null!=t?t:""})}))},[_,w]);const R=f(),V=S(),W=h(E),j=v(),A=()=>{L()},H=async e=>{e.preventDefault(),I(!0);try{await V(q.map(e=>{let{_id:t,value:l}=e;return{_id:t,value:l}})),z()}catch(t){j({type:"error",message:t})}finally{I(!1)}};return 0===q.length?m.createElement(F,{active:E,working:P,onSubmit:H},m.createElement(T,{number:t,title:l}),m.createElement(s,{blockEnd:"x32"},m.createElement(i,null,Array.from({length:5},(e,t)=>m.createElement(r,{key:t},m.createElement(u.Item,{align:"stretch"},m.createElement(r.Label,null,m.createElement(d,{width:"50%"}))),m.createElement(o.Skeleton,null)))))):m.createElement(F,{active:E,working:P,onSubmit:H},m.createElement(T,{number:t,title:l}),m.createElement(s,{blockEnd:"x32"},m.createElement(i,null,q.map((e,t)=>{let{_id:l,type:a,i18nLabel:n,value:i,values:u}=e;return m.createElement(r,{key:t},m.createElement(r.Label,{htmlFor:l},R(n)),m.createElement(r.Row,null,"string"===a&&m.createElement(p,{type:"text","data-qa":l,id:l,name:l,ref:0===t?W:void 0,value:i,onChange:e=>{let{currentTarget:{value:t}}=e;return D(l,t)}}),"select"===a&&m.createElement(c,{type:"select","data-qa":l,id:l,name:l,placeholder:R("Select_an_option"),value:i,onChange:e=>D(l,e),options:u.map(e=>{let{i18nLabel:t,key:l}=e;return[l,R(t)]})}),"boolean"===a&&m.createElement(c,{type:"select","data-qa":l,id:l,name:l,ref:0===t?W:void 0,value:String(i),onChange:e=>D(l,"true"===e),options:[["true",R("Yes")],["false",R("No")]]}),"language"===a&&m.createElement(c,{type:"select","data-qa":l,id:l,name:l,placeholder:R("Default"),value:i,onChange:e=>D(l,e),options:M.map(e=>{let{key:t,name:l}=e;return[t,l]}).sort((e,t)=>{let[l]=e,[a]=t;return l-a})})))}))),m.createElement(b,{disabled:P,onBackClick:w>2&&A}))}}

