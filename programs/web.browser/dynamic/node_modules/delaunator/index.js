function module(t,s,i){i.export({default:()=>n});const e=Math.pow(2,-52),h=new Uint32Array(512);class n{static from(t,s=g,i=y){const e=t.length,h=new Float64Array(2*e);for(let n=0;n<e;n++){const e=t[n];h[2*n]=s(e),h[2*n+1]=i(e)}return new n(h)}constructor(t){const s=t.length>>1;if(s>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*s-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(s)),this._hullPrev=new Uint32Array(s),this._hullNext=new Uint32Array(s),this._hullTri=new Uint32Array(s),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(s),this._dists=new Float64Array(s),this.update()}update(){const{coords:t,_hullPrev:s,_hullNext:i,_hullTri:h,_hullHash:n}=this,r=t.length>>1;let a=1/0,_=1/0,d=-1/0,g=-1/0;for(let e=0;e<r;e++){const s=t[2*e],i=t[2*e+1];s<a&&(a=s),i<_&&(_=i),s>d&&(d=s),i>g&&(g=i),this._ids[e]=e}const y=(a+d)/2,w=(_+g)/2;let b=1/0,A,k,M;for(let e=0;e<r;e++){const s=l(y,w,t[2*e],t[2*e+1]);s<b&&(A=e,b=s)}const S=t[2*A],x=t[2*A+1];b=1/0;for(let e=0;e<r;e++){if(e===A)continue;const s=l(S,x,t[2*e],t[2*e+1]);s<b&&s>0&&(k=e,b=s)}let z=t[2*k],U=t[2*k+1],T=1/0;for(let e=0;e<r;e++){if(e===A||e===k)continue;const s=c(S,x,z,U,t[2*e],t[2*e+1]);s<T&&(M=e,T=s)}let K=t[2*M],p=t[2*M+1];if(T===1/0){for(let e=0;e<r;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];u(this._ids,this._dists,0,r-1);const s=new Uint32Array(r);let i=0;for(let t=0,e=-1/0;t<r;t++){const h=this._ids[t];this._dists[h]>e&&(s[i++]=h,e=this._dists[h])}return this.hull=s.subarray(0,i),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(o(S,x,z,U,K,p)){const t=k,s=z,i=U;k=M,z=K,U=p,M=t,K=s,p=i}const m=f(S,x,z,U,K,p);this._cx=m.x,this._cy=m.y;for(let e=0;e<r;e++)this._dists[e]=l(t[2*e],t[2*e+1],m.x,m.y);u(this._ids,this._dists,0,r-1),this._hullStart=A;let L=3;i[A]=s[M]=k,i[k]=s[A]=M,i[M]=s[k]=A,h[A]=0,h[k]=1,h[M]=2,n.fill(-1),n[this._hashKey(S,x)]=A,n[this._hashKey(z,U)]=k,n[this._hashKey(K,p)]=M,this.trianglesLen=0,this._addTriangle(A,k,M,-1,-1,-1);for(let l=0,c,f;l<this._ids.length;l++){const r=this._ids[l],a=t[2*r],_=t[2*r+1];if(l>0&&Math.abs(a-c)<=e&&Math.abs(_-f)<=e)continue;if(c=a,f=_,r===A||r===k||r===M)continue;let u=0;for(let t=0,s=this._hashKey(a,_);t<this._hashSize&&(-1===(u=n[(s+t)%this._hashSize])||u===i[u]);t++);let d=u=s[u],g;for(;g=i[d],!o(a,_,t[2*d],t[2*d+1],t[2*g],t[2*g+1]);)if((d=g)===u){d=-1;break}if(-1===d)continue;let y=this._addTriangle(d,r,i[d],-1,-1,h[d]);h[r]=this._legalize(y+2),h[d]=y,L++;let w=i[d];for(;g=i[w],o(a,_,t[2*w],t[2*w+1],t[2*g],t[2*g+1]);)y=this._addTriangle(w,r,g,h[r],-1,h[w]),h[r]=this._legalize(y+2),i[w]=w,L--,w=g;if(d===u)for(;o(a,_,t[2*(g=s[d])],t[2*g+1],t[2*d],t[2*d+1]);)y=this._addTriangle(g,r,d,-1,h[d],h[g]),this._legalize(y+2),h[g]=y,i[d]=d,L--,d=g;this._hullStart=s[r]=d,i[d]=s[w]=r,i[r]=w,n[this._hashKey(a,_)]=r,n[this._hashKey(t[2*d],t[2*d+1])]=d}this.hull=new Uint32Array(L);for(let e=0,l=this._hullStart;e<L;e++)this.hull[e]=l,l=i[l];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,s){return Math.floor(r(t-this._cx,s-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:s,_halfedges:i,coords:e}=this;let n=0,r=0;for(;;){const l=i[t],a=t-t%3;if(r=a+(t+2)%3,-1===l){if(0===n)break;t=h[--n];continue}const o=l-l%3,c=a+(t+1)%3,f=o+(l+2)%3,u=s[r],d=s[t],g=s[c],y=s[f],w=_(e[2*u],e[2*u+1],e[2*d],e[2*d+1],e[2*g],e[2*g+1],e[2*y],e[2*y+1]);if(w){s[t]=y,s[l]=u;const e=i[f];if(-1===e){let s=this._hullStart;do{if(this._hullTri[s]===f){this._hullTri[s]=t;break}s=this._hullPrev[s]}while(s!==this._hullStart)}this._link(t,e),this._link(l,i[r]),this._link(r,f);const a=o+(l+1)%3;n<h.length&&(h[n++]=a)}else{if(0===n)break;t=h[--n]}}return r}_link(t,s){this._halfedges[t]=s,-1!==s&&(this._halfedges[s]=t)}_addTriangle(t,s,i,e,h,n){const r=this.trianglesLen;return this._triangles[r]=t,this._triangles[r+1]=s,this._triangles[r+2]=i,this._link(r,e),this._link(r+1,h),this._link(r+2,n),this.trianglesLen+=3,r}}function r(t,s){const i=t/(Math.abs(t)+Math.abs(s));return(s>0?3-i:1+i)/4}function l(t,s,i,e){const h=t-i,n=s-e;return h*h+n*n}function a(t,s,i,e,h,n){const r=(e-s)*(h-t),l=(i-t)*(n-s);return Math.abs(r-l)>=33306690738754716e-32*Math.abs(r+l)?r-l:0}function o(t,s,i,e,h,n){const r=a(h,n,t,s,i,e)||a(t,s,i,e,h,n)||a(i,e,h,n,t,s);return r<0}function _(t,s,i,e,h,n,r,l){const a=t-r,o=s-l,_=i-r,c=e-l,f=h-r,u=n-l,d=a*a+o*o,g=_*_+c*c,y=f*f+u*u;return a*(c*y-g*u)-o*(_*y-g*f)+d*(_*u-c*f)<0}function c(t,s,i,e,h,n){const r=i-t,l=e-s,a=h-t,o=n-s,_=r*r+l*l,c=a*a+o*o,f=.5/(r*o-l*a),u=(o*_-l*c)*f,d=(r*c-a*_)*f;return u*u+d*d}function f(t,s,i,e,h,n){const r=i-t,l=e-s,a=h-t,o=n-s,_=r*r+l*l,c=a*a+o*o,f=.5/(r*o-l*a),u=t+(o*_-l*c)*f,d=s+(r*c-a*_)*f;return{x:u,y:d}}function u(t,s,i,e){if(e-i<=20)for(let h=i+1;h<=e;h++){const e=t[h],n=s[e];let r=h-1;for(;r>=i&&s[t[r]]>n;)t[r+1]=t[r--];t[r+1]=e}else{const h=i+e>>1;let n=i+1,r=e;d(t,h,n),s[t[i]]>s[t[e]]&&d(t,i,e),s[t[n]]>s[t[e]]&&d(t,n,e),s[t[i]]>s[t[n]]&&d(t,i,n);const l=t[n],a=s[l];for(;;){do{n++}while(s[t[n]]<a);do{r--}while(s[t[r]]>a);if(r<n)break;d(t,n,r)}t[i+1]=t[r],t[r]=l,e-n+1>=r-i?(u(t,s,n,e),u(t,s,i,r-1)):(u(t,s,i,r-1),u(t,s,n,e))}}function d(t,s,i){const e=t[s];t[s]=t[i],t[i]=e}function g(t){return t[0]}function y(t){return t[1]}}

