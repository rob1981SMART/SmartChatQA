function module(r,e,n){let t,o,i;n.link("./accessors.js",{required(r){t=r}},0),n.link("./hierarchy/index.js",{Node(r){o=r},computeHeight(r){i=r}},1);var u="$",l={depth:-1},h={};function c(r){return r.id}function f(r){return r.parentId}n.exportDefault((function(){var r=c,e=f;function n(n){var t,c,f=n.length,a,d,p,w=new Array(f),s,g,m={};for(c=0;c<f;++c)t=n[c],p=w[c]=new o(t),null!=(s=r(t,c,n))&&(s+="")&&(m[g=u+(p.id=s)]=g in m?h:p);for(c=0;c<f;++c)if(p=w[c],null!=(s=e(n[c],c,n))&&(s+="")){if(!(d=m[u+s]))throw new Error("missing: "+s);if(d===h)throw new Error("ambiguous: "+s);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(a)throw new Error("multiple roots");a=p}if(!a)throw new Error("no root");if(a.parent=l,a.eachBefore((function(r){r.depth=r.parent.depth+1,--f})).eachBefore(i),a.parent=null,f>0)throw new Error("cycle");return a}return n.id=function(e){return arguments.length?(r=t(e),n):r},n.parentId=function(r){return arguments.length?(e=t(r),n):e},n}))}

