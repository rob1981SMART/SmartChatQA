function module(e,t,r){let n,o,s,a,l,i,c,u,p,m,d,g,f,x,k,E,y;function C(){const e=p(),t=g(),[r,C]=x(i(null)),[h,I]=x(i("Loading...")),[S,_]=x(i(0)),[b,v]=x(i(0)),T=k("GET","getCurrentImportOperation"),w=k("GET","getImportProgress"),D=E("admin-import"),R=E("admin-import-prepare");l(()=>{const r=async()=>{try{const{operation:e}=await T();if(!e.valid)return void D.push();if(!d.includes(e.status))return void R.push();C(e.importerKey),_(e.count.completed),v(e.count.total)}catch(r){t({type:"error",message:r||e("Failed_To_Load_Import_Data")}),D.push()}};r()},[]),l(()=>{if(!r)return;const n=n=>{let{key:o,step:s,count:{completed:a=0,total:l=0}={}}=n;if(o.toLowerCase()===r)switch(s){case m.DONE:return t({type:"success",message:e(s[0].toUpperCase()+s.slice(1))}),void D.push();case m.ERROR:case m.CANCELLED:return t({type:"error",message:e(s[0].toUpperCase()+s.slice(1))}),void D.push();default:I(s),_(a),v(l)}},o=async()=>{try{const r=await w();if(!r)return t({type:"warning",message:e("Importer_not_in_progress")}),void R.push();f.registerCallback(n),n(r)}catch(r){t({type:"error",message:r||e("Failed_To_Load_Import_Data")}),D.push()}};return o(),()=>{f.unregisterCallback(n)}},[r]);const L=c(()=>0===b?null:S/b*100);return a.createElement(y,null,a.createElement(y.Header,{title:e("Importing_Data")}),a.createElement(y.ContentShadowScroll,null,a.createElement(n,{marginInline:"auto",marginBlock:"neg-x24",width:"full",maxWidth:"x580"},a.createElement(o,{block:"x24"},a.createElement(n,{is:"p",textStyle:"p1",textColor:"default"},e(h[0].toUpperCase()+h.slice(1))),L?a.createElement(n,{display:"flex",justifyContent:"center",textStyle:"p1",textColor:"default"},a.createElement(n,{is:"progress",value:S,max:b,marginInlineEnd:"x24"}),a.createElement(n,{is:"span"},S,"/",b," (",u.numberFormat(L,0),"%)")):a.createElement(s,{justifyContent:"center"})))))}r.link("@rocket.chat/fuselage",{Box(e){n=e},Margins(e){o=e},Throbber(e){s=e}},0),r.link("react",{default(e){a=e},useEffect(e){l=e},useState(e){i=e},useMemo(e){c=e}},1),r.link("underscore.string",{default(e){u=e}},2),r.link("../../../../client/contexts/TranslationContext",{useTranslation(e){p=e}},3),r.link("../../lib/ImporterProgressStep",{ProgressStep(e){m=e},ImportingStartedStates(e){d=e}},4),r.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch(e){g=e}},5),r.link("../ImporterWebsocketReceiver",{ImporterWebsocketReceiver(e){f=e}},6),r.link("../../../../client/hooks/useSafely",{useSafely(e){x=e}},7),r.link("../../../../client/contexts/ServerContext",{useEndpoint(e){k=e}},8),r.link("../../../../client/contexts/RouterContext",{useRoute(e){E=e}},9),r.link("../../../../client/components/basic/Page",{Page(e){y=e}},10),r.exportDefault(C)}

