function module(e,t,l){let n,a,o,r,i,s,c,m,u,d,p,E,_,g,h,y,k;function w(){var e;const t=d(),l=p(),[w,f]=y(s(!0)),[C,S]=y(s()),[x,v]=y(s([])),T=_("GET","getCurrentImportOperation"),F=_("GET","getLatestImportOperations"),I=_("POST","downloadPendingFiles"),b=E("admin-import-new"),P=E("admin-import-progress");c(()=>{const e=async()=>{f(!0);try{const{operation:e}=await T();S(e)}catch(e){l({type:"error",message:t("Failed_To_Load_Import_Operation")})}try{const e=await F();v(e)}catch(e){l({type:"error",message:t("Failed_To_Load_Import_History")})}f(!1)};e()},[]);const D=m(()=>null==x?void 0:x.some(e=>{let{importerKey:t,status:l}=e;return"slack"===t&&l===g.DONE}),[x]),O=()=>{b.push()},L=async()=>{try{f(!0);const{count:e}=await I();if(e)return l({type:"info",message:t("No_files_left_to_download")}),void f(!1);l({type:"info",message:t("File_Downloads_Started")}),P.push()}catch(e){console.error(e),l({type:"error",message:t("Failed_To_Download_Files")}),f(!1)}},M=k("(max-width: 768px)");return i.createElement(u,null,i.createElement(u.Header,{title:t("Import")},i.createElement(o,null,i.createElement(a,{primary:!0,disabled:w,onClick:O},t("Import_New_File")),D&&i.createElement(a,{disabled:w,onClick:L},t("Download_Pending_Files")))),i.createElement(u.ContentShadowScroll,null,i.createElement(r,{fixed:!0},i.createElement(r.Head,null,i.createElement(r.Row,null,i.createElement(r.Cell,{is:"th",rowSpan:2,width:"x140"},t("Import_Type")),i.createElement(r.Cell,{is:"th",rowSpan:2},t("Last_Updated")),!M&&i.createElement(i.Fragment,null,i.createElement(r.Cell,{is:"th",rowSpan:2},t("Last_Status")),i.createElement(r.Cell,{is:"th",rowSpan:2},t("File")),i.createElement(r.Cell,{is:"th",align:"center",colSpan:4,width:"x320"},t("Counters")))),!M&&i.createElement(r.Row,null,i.createElement(r.Cell,{is:"th",align:"center"},t("Users")),i.createElement(r.Cell,{is:"th",align:"center"},t("Channels")),i.createElement(r.Cell,{is:"th",align:"center"},t("Messages")),i.createElement(r.Cell,{is:"th",align:"center"},t("Total")))),i.createElement(r.Body,null,w?Array.from({length:20},(e,t)=>i.createElement(h.Skeleton,{small:M,key:t})):i.createElement(i.Fragment,null,(null==C?void 0:C.valid)&&i.createElement(h,n({},C,{small:M})),null==x?void 0:null===(e=x.filter(e=>{let{_id:t}=e;return(null==C?void 0:C._id)!==t||!(null==C?void 0:C.valid)}))||void 0===e?void 0:e.map(e=>i.createElement(h,n({key:e._id},e,{valid:!1,small:M}))))))))}l.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),l.link("@rocket.chat/fuselage",{Button(e){a=e},ButtonGroup(e){o=e},Table(e){r=e}},0),l.link("react",{default(e){i=e},useState(e){s=e},useEffect(e){c=e},useMemo(e){m=e}},1),l.link("../../../../client/components/basic/Page",{Page(e){u=e}},2),l.link("../../../../client/contexts/TranslationContext",{useTranslation(e){d=e}},3),l.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch(e){p=e}},4),l.link("../../../../client/contexts/RouterContext",{useRoute(e){E=e}},5),l.link("../../../../client/contexts/ServerContext",{useEndpoint(e){_=e}},6),l.link("../../lib/ImporterProgressStep",{ProgressStep(e){g=e}},7),l.link("./ImportOperationSummary",{default(e){h=e}},8),l.link("../../../../client/hooks/useSafely",{useSafely(e){y=e}},9),l.link("../../../ui/client/views/app/components/hooks",{useMediaQuery(e){k=e}},10),l.exportDefault(w)}

