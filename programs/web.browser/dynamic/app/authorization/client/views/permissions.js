function module(e,t,i){let s,n,r,o,a,l,c,m,p,u,d,g,f,h;i.link("meteor/meteor",{Meteor(e){s=e}},0),i.link("underscore",{default(e){n=e}},1),i.link("underscore.string",{default(e){r=e}},2),i.link("meteor/reactive-dict",{ReactiveDict(e){o=e}},3),i.link("meteor/tracker",{Tracker(e){a=e}},4),i.link("meteor/templating",{Template(e){l=e}},5),i.link("../../../models/client",{Roles(e){c=e}},6),i.link("../lib/ChatPermissions",{ChatPermissions(e){m=e}},7),i.link("../hasPermission",{hasAllPermission(e){p=e}},8),i.link("../../../utils/client",{t(e){u=e}},9),i.link("../../../ui-utils/client/lib/SideNav",{SideNav(e){d=e}},10),i.link("../../lib",{CONSTANTS(e){g=e},AuthorizationUtils(e){f=e}},11),i.link("..",{hasAtLeastOnePermission(e){h=e}},12),l.permissions.helpers({tabsData(){const{state:e}=l.instance(),t={label:u("Permissions"),value:"permissions",condition:()=>!0},i={label:u("Settings"),value:"settings",condition:()=>!0},s=[t],n=p("access-setting-permissions");switch(n&&s.push(i),n&&e.get("tab")){case"settings":i.active=!0;break;case"permissions":t.active=!0;break;default:t.active=!0}return{tabs:s,onChange(t){e.set({tab:t,size:50})}}},roles:()=>c.find(),permissions(){const{state:e}=l.instance(),t=e.get("size"),i=new RegExp(r.escapeRegExp(e.get("filter")),"i");return m.find({level:{$ne:g.SETTINGS_LEVEL},_id:i},{sort:{_id:1},limit:t})},settingPermissions(){const{state:e}=l.instance(),t=e.get("size"),i=new RegExp(r.escapeRegExp(e.get("filter")),"i");return m.find({_id:i,level:g.SETTINGS_LEVEL,group:{$exists:!0}},{limit:t,sort:{group:1,section:1}})},hasPermission:()=>p("access-permissions"),hasNoPermission:()=>!h(["access-permissions","access-setting-permissions"]),filter:()=>l.instance().state.get("filter"),tab:()=>l.instance().state.get("tab")}),l.permissions.events({"keyup #permissions-filter"(e,t){e.stopPropagation(),e.preventDefault(),t.state.set("filter",e.currentTarget.value)},"scroll .content":n.throttle((e,t)=>{let{currentTarget:i}=e;if(i.offsetHeight+i.scrollTop>=i.scrollHeight-100)return t.state.set("size",t.state.get("size")+50)},300)}),l.permissions.onCreated((function(){this.state=new o({filter:"",tab:"",size:50}),this.autorun(()=>{this.state.get("filter"),this.state.set("size",50)})})),l.permissionsTable.helpers({granted:(e,t)=>e&&~e.indexOf(t._id)?"checked":null,permissionName(e){if(e.level===g.SETTINGS_LEVEL){let t="";return e.group&&(t="".concat(u(e.group)," > ")),e.section&&(t="".concat(t).concat(u(e.section)," > ")),"".concat(t).concat(u(e.settingId))}return u(e._id)},permissionDescription:e=>u("".concat(e._id,"_description")),isRolePermissionEnabled:(e,t)=>!f.isPermissionRestrictedForRole(t._id,e._id)}),l.permissionsTable.events({"click .role-permission"(e){const t=e.currentTarget.getAttribute("data-permission"),i=e.currentTarget.getAttribute("data-role"),n=t&&m.findOne(t),r=~n.roles.indexOf(i)?"authorization:removeRoleFromPermission":"authorization:addPermissionToRole";return s.call(r,t,i)}}),l.permissions.onRendered(()=>{a.afterFlush(()=>{d.setFlex("adminFlex"),d.openFlex()})})}

